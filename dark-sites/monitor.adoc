---
sidebar: sidebar 
permalink: dark-sites/monitor.html 
keywords: monitoring system health 
summary: Per garantire la disponibilità dei dati, è possibile monitorare lo stato di Keystone Collector utilizzando qualsiasi sistema di monitoraggio che supporti le richieste HTTP. 
---
= Monitora lo stato di salute di Keystone Collector in modalità privata
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
È possibile monitorare lo stato di Keystone Collector utilizzando qualsiasi sistema di monitoraggio che supporti le richieste HTTP.

Per impostazione predefinita, i servizi sanitari Keystone non accettano connessioni da IP diversi da localhost.  L'endpoint sanitario Keystone è `/uber/health` e ascolta su tutte le interfacce del server Keystone Collector sulla porta `7777` .  Alla richiesta, l'endpoint restituisce come risposta un codice di stato della richiesta HTTP con un output JSON, che descrive lo stato del sistema Keystone Collector.  Il corpo JSON fornisce uno stato di salute generale per il `is_healthy` attributo, che è un valore booleano; e un elenco dettagliato degli stati per componente per il `component_details` attributo.  Ecco un esempio:

[listing]
----
$ curl http://127.0.0.1:7777/uber/health
{"is_healthy": true, "component_details": {"vicmet": "Running", "ks-collector": "Running", "ks-billing": "Running", "chronyd": "Running"}}
----
Vengono restituiti i seguenti codici di stato:

* *200*: indica che tutti i componenti monitorati sono integri
* *503*: indica che uno o più componenti non sono integri
* *403*: indica che il client HTTP che interroga lo stato di integrità non è presente nell'elenco _allow_, ovvero un elenco di CIDR di rete consentiti.  Per questo stato non vengono restituite informazioni sanitarie.
+
L'elenco _allow_ utilizza il metodo CIDR di rete per controllare quali dispositivi di rete sono autorizzati a interrogare il sistema sanitario Keystone .  Se viene visualizzato l'errore 403, aggiungere il sistema di monitoraggio all'elenco _consentito_ da * Keystone Collector management TUI > Configura > Monitoraggio integrità*.

+
image:cidr-list.png["cidrs di rete consentiti"]





== Genera e raccogli pacchetti di supporto

Per risolvere i problemi con Keystone Collector, puoi rivolgerti al supporto NetApp , che potrebbe richiedere un file _.tar_.  È possibile generare questo file tramite l'utilità TUI di gestione Keystone Collector.

Per generare un file _.tar_, seguire questi passaggi:

. Vai a *Risoluzione dei problemi > Genera pacchetto di supporto*.
. Seleziona la posizione in cui salvare il pacchetto, quindi fai clic su *Genera pacchetto di supporto*.
+
image:dark-site-generate-support-bundle-1.png["Genera pacchetto di supporto"]

+
Questo processo crea un `tar` pacchetto nella posizione indicata che può essere condiviso con NetApp per la risoluzione dei problemi.

. Una volta scaricato il file, è possibile allegarlo al ticket di supporto Keystone ServiceNow.  Per informazioni sull'emissione dei biglietti, vederelink:../concepts/gssc.html["Generazione di richieste di servizio"] .

